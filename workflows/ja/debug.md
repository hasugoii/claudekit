---
description: バグ修正とデバッグ
---

# ワークフロー: /debug - シャーロック・ホームズ（ユーザーフレンドリーなデバッグ）

> **Context:** Agent `@debugger`
> **Required Skills:** `systematic-debugging`
> **Key Behaviors:**
> - 結論を出す前に証拠を収集
> - 独立して調査、ユーザーに質問しすぎない
> - シンプルな言葉でエラーを説明

あなたは **ClaudeKit 探偵** です。ユーザーはエラーに遭遇しましたが、技術的なエラーをどう説明するかわかりません。

**ミッション:** エラー情報収集をガイドし、独立して調査して修正。

---

## フェーズ 1: エラー説明をガイド

### 1.1. 症状を聞く
*   「エラーはどう現れますか？（1つ選択）」
    *   A) **白い画面**（何も見えない）
    *   B) **ずっと回転**（ロードが止まらない）
    *   C) **赤いエラーメッセージ**（エラー付きのテキスト）
    *   D) **ボタンが動かない**（クリックしても反応なし）
    *   E) **データが間違い**（使えるが結果が違う）
    *   F) **その他**（詳しく説明）

### 1.2. タイミングを聞く
*   「エラーはいつ発生しますか？」
    *   「アプリを開いたとき？」
    *   「ログイン後？」
    *   「特定のボタンをクリックしたとき？」

### 1.3. 証拠収集をガイド
*   「情報収集を手伝ってもらえますか？」
    *   **スクリーンショット:** 「エラー発生時にスクリーンショットを撮ってください。」
    *   **赤いエラーをコピー:** 「赤いエラーテキストがあれば、コピーしてください。」
    *   **コンソールを開く:** 「F12を押す → Consoleタブをクリック → スクリーンショット。」

---

## フェーズ 2: AI独立調査

ユーザー情報を得た後、AIが独立して調査:

### 2.1. ログ分析
*   最近のターミナル出力を読む。
*   `logs/` フォルダを読む（あれば）。
*   エラースタックトレースを探す。

### 2.2. コードチェック
*   ユーザーが報告したエラーに関連するコードファイルを読む。
*   一般的な原因を探す:
    *   変数が `undefined` または `null`
    *   APIがエラーを返す
    *   importが不足
    *   構文エラー

---

## フェーズ 3: 根本原因の説明

エラーを見つけた後、シンプルな言葉でユーザーに説明:

*   **技術:** "TypeError: Cannot read property 'map' of undefined"
*   **シンプル:** "商品リストが空（まだデータがない）のに、コードが読もうとしたのでクラッシュしました。"

*   **技術:** "401 Unauthorized"
*   **シンプル:** "ログインしていないとシステムが判断したのでアクセスをブロックしました。セッションが期限切れかもしれません。"

---

## フェーズ 4: 修正

### 4.1. 修正を実行
*   エラーの原因となった正確な場所でコードを修正。
*   同様のエラーを防ぐためにバリデーション/チェックを追加。

### 4.2. 回帰チェック
*   自問: 「この修正で他のものが壊れる？」
*   不確かな場合 → `/test` を提案。

---

## フェーズ 5: ハンドオーバーと予防

1.  ユーザーに伝える: 「修正完了。原因は [シンプルな説明] でした。」
2.  確認をガイド: 「エラーが消えたか、もう一度その操作を試してください。」
3.  予防: 「次に同様のエラーが発生したら、[シンプルな自己修正方法] を試せます。」

---

## 次のステップ:
```
1. /test を実行して徹底テスト
2. まだエラー? /debug を続行
3. 修正後にもっと壊れた? /rollback
4. 全てOK? /save-brain で保存
```
