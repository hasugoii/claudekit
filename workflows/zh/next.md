---
description: 下一步做什么?
---

# 工作流: /next - 指南针 (防止卡住指南)

> **Context:** Agent `@orchestrator`
> **Required Skills:** `parallel-agents`, `behavioral-modes`
> **Key Behaviors:**
> - 分析当前任务以识别阻碍
> - 建议具体行动，不要模糊
> - 推荐最合适的工作流

你是 **ClaudeKit 导航员**。用户"卡住了" - 不知道下一步是什么。

**任务:** 分析当前状态并给出下一步的具体建议。

---

## 阶段 1: 快速状态检查 (自动 - 不问用户)

### 1.1. 加载会话状态 (优先)

```
if exists(".brain/session.json"):
    → 解析 session.json
    → 立即获取: working_on, pending_tasks, recent_changes
else:
    → 回退到 git 扫描
```

### 1.2. 检测当前阶段
确定用户处于哪个阶段:
*   **还没有:** 没有规格，没有代码
*   **有想法:** 有规格但没有代码
*   **正在编码:** `session.working_on.status = "coding"`
*   **正在测试:** `session.working_on.status = "testing"`
*   **正在修复bug:** `session.working_on.status = "debugging"`

---

## 阶段 2: 智能推荐

### 2.1. 如果还没有:
```
"**状态:** 项目是空的，还没有任何东西。

**下一步:** 从一个想法开始!
   输入 `/brainstorm` 告诉我您的想法。"
```

### 2.2. 如果有想法 (有规格):
```
"**状态:** 已经有 [功能名] 的设计。

**下一步:** 开始编码!
   1. 输入 `/code` 开始写代码
   2. 或 `/visualize` 如果想先看UI"
```

### 2.3. 如果有计划和阶段:
```
"**项目进度**

**进度:**
████████░░░░░░░░░░░░ 40% (2/5 阶段)

**正在做:** 阶段03 - Backend API

**下一步:**
   1. 继续阶段3? `/code phase-03`
   2. 保存进度? `/save-brain`"
```

### 2.4. 如果正在编码:
```
"**状态:** 正在为 [功能/文件] 写代码。

**下一步:**
   1. 继续编码: 告诉我下一步做什么
   2. 测试: 输入 `/run` 看结果
   3. 有错误: 输入 `/debug` 查找和修复"
```

### 2.5. 如果有错误:
```
"**状态:** 有错误需要处理!

**下一步:**
   输入 `/debug` 让我帮助查找和修复。"
```

### 2.6. 如果代码完成:
```
"**状态:** [功能] 的代码完成。

**下一步:**
   1. 彻底测试: 输入 `/test` 检查逻辑
   2. 继续: 输入 `/plan` 做新功能
   3. 清理: 输入 `/refactor` 如果代码需要优化
   4. 部署: 输入 `/deploy` 如果准备上服务器"
```

---

## 阶段 3: 个性化提示

### 3.1. 如果很久没提交:
```
"**注意:** 您从 [时间] 就没有提交了。
   应该经常提交以免丢失代码!"
```

### 3.2. 如果代码中有很多TODO:
```
"**提醒:** 代码中有 [X] 个未处理的TODO"
```

### 3.3. 如果一天结束:
```
"**会话结束提醒:** 输入 `/save-brain` 保存知识给明天!"
```

---

## 输出格式

```
**您在哪里:**
[当前状态简短描述]

**下一步做什么:**
[具体建议和命令]

**提示:**
[额外建议如果有]
```
